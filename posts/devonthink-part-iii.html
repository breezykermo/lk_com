<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Lachlan Kermode" />
  <meta name="dcterms.date" content="2020-03-01" />
  <title>Associative Archiving with DEVONThink (Part III)</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
</head>
<body>
<div class="header">
      <a href="https://lachlankermode.com">Home</a>
</div>
<header id="title-block-header">
<h1 class="title">Associative Archiving with DEVONThink (Part III)</h1>
<p class="author">Lachlan Kermode</p>
<p class="date">1 March 2020</p>
</header>
<div class="main-content">
<p>Annotations in DT have long been a bit of a brain tangle for me. My
spec for annotations (since I didn't go into this in <a
href="https://lachlankermode.com/associative-archiving-with-devonthink-1">part
I</a>) is as follows:</p>
<style> li { display: revert !important; }</style>

<ol style="padding-left:revert;">

<li>

<p>There should be no constraints on how many annotations you can take
from a document. You could take none, one or two, or ten thousand.</p>
</li>

<li>

<p>An annotation should have an inlined quote (whatever text is
highlighted when you create the annotation), and should have a one-click
reference back to the specific page of the source document from which
it's drawn (if it is a PDF- for webarchives and weblocs there is no
notion of pages, so a generic reference to the document suffices).</p>
</li>

<li>

<p>Annotations need to be their own entities in the archive. This has
several implications. One of these is that an annotation is not solely
or specifically bound to its source document. Annotations can be
included in projects without necessarily including the source document
itself. Another is that annotations can have their own tags which need
not be the same as their source document's.</p>
</li>

<li>

<p>Annotations should be recognizably distinct from other documents.
This is perhaps a personal preference, but I think that it makes sense
given that an annotation is part source text, part text that I myself
have written (an associated note). In this sense annotations are closer
to files in my PKB (explained in brief at the top of this post) than any
other content in my archive. They are part source material, part my own
creation.</p>
</li>

<li>

<p>Creating annotations should be possible <em>from anywhere</em>: not
just within DEVONthink.</p>
</li>

</ol>

<p>Though it leaves a bit to be desired in my workflow, it does make
sense to me why DT does not include support for annotations natively. DT
wants to be as general-purpose a file manager as possible, and to not
force your hand when it comes to file formats or workflows. The
conception of an annotation that I have above is something fairly
specific to an academic or otherwise citational workflow, and might not
be necessary for many folks' file management philosophies. For many, DT
is a starting point: it opens up onto other applications. Having some
sort of DT-specific file type for annotations would run against
this.</p>
<h1 id="annotations-as-rtfs-my-old-approach">Annotations as RTFs (my old
approach)</h1>
<p>Though it doesn't support annotations out of the box, many have tried
to create an annotation workflow in DT. See <a
href="https://discourse.devontechnologies.com/t/best-way-for-annotations/52610/13">here</a>
and <a
href="https://discourse.devontechnologies.com/t/make-an-annotation-with-links-notes-tags-v2/17221/21">here</a>
for some examples. A common way to manufacture annotations is to create
a shortcut that creates a new text file from a template, which includes
a link back to the source document via DT's <a
href="https://talk.macpowerusers.com/t/playing-with-devonthink-what-are-your-most-interesting-uses/13708/2">URL
schema</a> (which allows you to open up specific documents, at specfic
page numbers, from anywhere on your Mac).</p>
<p>This works okay, and I used a similar workflow for a long time: <code
class="verbatim">Cmd-Option-;</code> to automatically create a new RTF
with the highlighted text in a different colour, with a hyperlink at the
top that can take me back to the quotes source. (If you're interested to
try this approach, my script is <a
href="https://lachlankermode.com/TakeNote.applescript">available
here</a>) Any other notes I wanted to write about the quote just went
directly in the RTF document beneath. This approach satisfies at roughly
three and arguably four of the conditions outlined above, with the
arguable exception being number four: RTF documents are not particularly
distinct from other documents, especially if you happen to have word
documents and other rich text as source documents in your archive. You
can get part of the way there by using a naming schema for RTF
annotations, but it was still a bit messy by my measure.</p>
<pre class="example"><code>&lt;img src=&quot;static/rtf-note-example.png&quot; width=&quot;100%&quot;&gt;
</code></pre>
<p>Most importantly, creating annotations from outside DEVONthink gets
messy very quickly, meaning that this approach falls flat on condition
five. In theory, you can write scripts to generate RTFs on other
devices, and then you could work out some syncing mechanism to carry
those annotations into your main DT workstation at some point via
Dropbox or otherwise: but it's not ideal. Moreover, RTF isn't the most
straightfoward format to generate. (Although admittedly you could
replace RTFs with Markdown or something similar; it just wouldn't look
as nice inside DT.)</p>
<h1 id="annotations-as-rss-my-current-approach">Annotations as RSS (my
current approach)</h1>
<p>A month or so ago, I came across Francis Tseng's <a
href="https://spaceandtim.es/etc/research_tools/">wonderful writeup
regarding his research tooling</a>. One of the components of his
workflow is a super simple HTTP server called <a
href="https://github.com/frnsys/hili">hili</a>, which accepts 'clips' at
a POST endpoint, and stores them as simple JSON. Clips contain whatever
the source quote and images, a reference to the URL where the clip
happened, and optional tags that can be used further on to help
categorise the clip.</p>
<p>I really liked this idea, as it detaches the idea of taking notes
from any application in particular and makes it universally available
wherever there's an Internet connection (and the ability to send a
simple POST request). I <a
href="https://github.com/breezykermo/hili">modified hili</a> by adding
the ability to take a note associated with each clip, and added scripts
for <a
href="https://github.com/breezykermo/hili/tree/master/clients/devonthink">DEVONthink</a>
and <a
href="https://github.com/breezykermo/hili/tree/master/clients/scriptable-ios">iOS</a>
in addition to Francis' original <a
href="https://github.com/breezykermo/hili/tree/master/clients/firefox">extension
for Firefox</a>.</p>
<p>For a while I clipped away while reading on my various devices,
building up a <a
href="https://research.forensic-architecture.org/hili/view">database of
clips</a> from both webpages and DT documents. Thanks to DT's URL
schema, I can treat DT URLs in the same way that I do HTTP ones: as
hyperlinks that can open up the right document in DT from wherever else
(i.e. directly from the browser in which the clips are shown. Note that
this won't work using my clips, as the DT URLs are local to my
computer).</p>
<pre class="example"><code>&lt;img src=&quot;static/hili-with-dt-html.png&quot; width=&quot;100%&quot;&gt;
</code></pre>
<p>The HTML view of clips pictured above is handy, and is nice to
confirm that cilps are coming in, or to quickly search for a clip from
wherever: I just have to open up a browser from any device to my hili
URL and I have them all. I developed a <a
href="https://research.forensic-architecture.org/hili/view?t=infraspace">basic
way to filter clips by tag</a>- but quickly realised that I would have
to build a full frontend interface with full text search to really get
the most out of my clips.</p>
<p>Even then, the clips in hili would sit separately from everything
else in DT, which is less than ideal. I use the same tag structure with
clips as I do with DT documents– some are associated with projects,
others by type (see <a
href="https://lachlankermode.com/associative-archiving-with-devonthink-2">part
II</a> for more detail on this structure). Ideally, I would like to
filter for a project tag in DT, and see both all DT documents associated
with that project, and also all of the hili clips I've tagged as
relevant to that project. As per specification #5, I do want annotations
to be somewhat separate from source documents: but if they're only
available in an entirely different interface, it means that I would
basically have to do every search twice; once in DT for documents, and
then again in the hili webview for annotations.</p>
<p>While looking through <a href="https://github.com/frnsys/rssrs">one
of Francis' other projects</a> recently, I realised that I could have
the best of both worlds using a tried-and-true technology (and perhaps
my favourite data format for its collection of curiously coexisting
qualities: relative obscurity, ubiquitousness, and decided simplicity):
<a href="https://en.wikipedia.org/wiki/RSS">RSS</a>.</p>
<p>RSS is usually used to 'syndicate' news feeds from various sites,
making all the content available all from single reader such as <a
href="https://feedly.com/">Feedly</a> or <a
href="https://newsboat.org/">Newsboat</a>. The format it uses for news
items, however, is also almost perfect to represent a document
annotation. It contains some header text, a description, a source URL,
and a set of tags that can be used to categorise the item.</p>
<p>Moreover, DT supports RSS feeds in such a way that item tags are
automatically attributed as DT tags. This means that if I tag a clip as
'infraspace' when reading, when that clip comes into DT as an RSS item,
it'll automatically be associated with all of the other content in that
project. Making my clips available as an RSS feed gives the best of all
worlds: I can clip from anywhere, view clips in HTML at a glance (if I'm
not at my Mac), but also keep all clips as integrated and distinct items
within my archive.</p>
<p>It also means I get the full power of DT search for my clips, so I
don't need to think about developing a new UI to group all those related
to a particular document, say, or all those that have a particular tag,
or all those that I clipped during a particular time period. They show
up beautifully in project workspaces, with a distinct type (HTML text)
that doesn't overlap with other documents in my archive (as RTF
annotations sometimes did with Word docs), and one click away from their
source documents like the HTML view.</p>
<pre class="example"><code>&lt;img src=&quot;static/clips-rss-in-dt.png&quot; width=&quot;100%&quot;&gt;
</code></pre>
<h1 id="more-to-come">More to come…</h1>
<p>Francis and I are <a
href="https://github.com/frnsys/hili/pull/8">working on</a> integrating
our hilis, which might lead to it becoming a more stable tool for folks
not familiar with Python and HTTP requests at some point: but if you're
not afraid of Python and want to try it, please do! I'd be very happy to
hear about and help anyone who's interested to mess around with it (<a
href="mailto:lachiekermode@gmail.com">email me</a> or <a
href="https://github.com/breezykermo/hili">open an issue on Github</a>
if you run into trouble).</p>
</div>
<div class="footer">
      <a href="https://lachlankermode.com">Home</a>
</div>
</body>
</html>
